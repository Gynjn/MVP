<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Multi-view Pyramid Transformer: Look Coarser to See Broader</title>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PYVRSFMDRL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-PYVRSFMDRL');
  </script>

  <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro"
        rel="stylesheet">

  <link rel="stylesheet" href="./static/css/bulma.min.css">
  <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
  <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
  <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
  <link rel="stylesheet" href="./static/css/index.css">
  <link rel="icon" href="./static/images/favicon.svg">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script defer src="./static/js/fontawesome.all.min.js"></script>
  <script src="./static/js/bulma-carousel.min.js"></script>
  <script src="./static/js/bulma-slider.min.js"></script>
  <script src="./static/js/index.js"></script>
  <script src="./static/script.js" type="text/javascript"></script>

</head>
<body>


<!-- <section class="hero">
  <div class="hero-body">
    <div class="container is-max-desktop">
      <div class="columns is-centered">
        <div class="column has-text-centered">
          <h1 class="title is-1 publication-title">
            <span style="color:#94cd6d;">M</span>ulti-
            <span style="color:#94cd6d;">v</span>iew
            <span style="color:#94cd6d;">P</span>yramid Transformer: Look Coarser to See Broader
          </h1>
          <div class="is-size-5 publication-authors">
              <span class="author-block">
                  <a href="https://gynjn.github.io/info/"><span style="color:#000000;">Gyeongjin Kang</span></a><sup style="color: black;">1</sup><span style="color: black;"><sup>*</sup>,</span>
                  <a href="https://github.com/yang-gwon2"><span style="color:#000000;">Seungkwon Yang</span></a><sup style="color: black;">2</sup><span style="color: black;"><sup>*</sup>,</span>
                  <a href="https://github.com/stnamjef"><span style="color:#000000;">Seungtae Nam</span></a><sup style="color: black;">2</sup><span style="color: black;">,</span>
                  <a href="https://github.com/Younggeun-L"><span style="color:#000000;">Younggeun Lee</span></a><sup style="color: black;">1</sup><span style="color: black;">,</span>
                  <a href="https://github.com/jungcow"><span style="color:#000000;">Jungwoo Kim</span></a><sup style="color: black;">2</sup><span style="color: black;">,</span>
                  <a href="https://silverbottlep.github.io/index.html"><span style="color:#000000;">Eunbyung Park</span></a><sup style="color: black;">2</sup>
          </div>
          <div class="is-size-5 publication-authors" style="margin-top: 1rem;">
            <div style="display: inline-flex; gap: 1.5rem;">
              <span class="author-block" style="color: black;"><sup>1</sup>Sungkyunkwan University</span>
              <span class="author-block" style="color: black;"><sup>2</sup>Yonsei University</span>
            </div>
          </div>          
        </div>
      </div>
    </div>
  </div>
</section> -->

<body>
  <div class="header-wrapper">
    <div class="header-container" id="header-container">
      <div class="header-content">
        <!-- <h1 style="font-size: 3rem; font-weight: bold; margin-bottom: 0.1rem; color: rgb(35, 33, 30);"> -->
          <!-- Multi-view Pyramid Transformer -->
           <!-- <span style="color: rgb(230, 100, 80);">i</span><span style="color: rgb(230, 183, 53);">L</span><span style="color: rgb(117, 160, 85);">R</span><span style="color: rgb(96, 120, 172);">M</span> -->
        <!-- </h1> -->
        <!-- <h1 class="title is-1 publication-title" style="font-weight: bold; margin-bottom: 0.5rem; color: rgb(35, 33, 30);">Multi-view Pyramid Transformer: Look Coarser to See Broader</h1> -->
        <h1 class="title is-1 publication-title">
          <span style="color:#BF571B;">M</span>ulti-<span style="color:#638C45;">V</span>iew
          <span style="color:#3573B1;">P</span>yramid Transformer
        </h1>         
        <h1 class="title is-3 publication-title" style="font-weight: normal; margin-top: -0.4rem; color: rgb(0, 0, 0);">
          Look Coarser to See Broader
        </h1>
        <div class="is-size-5 publication-authors" style="margin-bottom: 0rem; margin-top: 0.5rem; color: black">
            <span class="author-block">
                <a href="https://gynjn.github.io/info/"><span style="color:#000000;">Gyeongjin Kang</span></a><sup style="color: black;">1</sup><span style="color: black;"><sup>*</sup>,</span>
                <a href="https://github.com/yang-gwon2"><span style="color:#000000;">Seungkwon Yang</span></a><sup style="color: black;">2</sup><span style="color: black;"><sup>*</sup>,</span>
                <a href="https://github.com/stnamjef"><span style="color:#000000;">Seungtae Nam</span></a><sup style="color: black;">2</sup><span style="color: black;">,</span>
        </div>
        <div class="is-size-5 publication-authors" style="margin-bottom: 1rem; color: black">
            <span class="author-block">
                <a href="https://github.com/Younggeun-L"><span style="color:#000000;">Younggeun Lee</span></a><sup style="color: black;">1</sup><span style="color: black;">,</span>
                <a href="https://github.com/jungcow"><span style="color:#000000;">Jungwoo Kim</span></a><sup style="color: black;">2</sup><span style="color: black;">,</span>
                <a href="https://silverbottlep.github.io/index.html"><span style="color:#000000;">Eunbyung Park</span></a><sup style="color: black;">2</sup>
        </div>        
        <div class="is-size-5 publication-authors" style="margin-top: 1rem;">
          <div style="display: inline-flex; gap: 1.5rem;">
            <span class="author-block" style="color: black;"><sup>1</sup>Sungkyunkwan University</span>
            <span class="author-block" style="color: black;"><sup>2</sup>Yonsei University</span>
          </div>
        </div>  
        <div class="publication-links" style="margin-bottom: -1rem; margin-top: 1rem;">
          <!-- PDF Link. -->
          <span class="link-block">
            <a href="https://arxiv.org/pdf/2512.07806"
                class="external-link button is-normal is-dark">
              <span class="icon">
                  <i class="fas fa-file-pdf"></i>
              </span>
              <span>Paper</span>
            </a>
          </span>
          <span class="link-block">
            <a href="https://arxiv.org/abs/2512.07806"
                class="external-link button is-normal is-dark">
              <span class="icon">
                  <i class="ai ai-arxiv"></i>
              </span>
              <span>arXiv</span>
            </a>
          </span>
          <!-- Code Link. -->
          <span class="link-block">
            <a href="https://github.com/Gynjn/MVP"
                class="external-link button is-normal is-dark">
              <span class="icon">
                  <i class="fab fa-github"></i>
              </span>
              <span>Code</span>
              </a>
          </span>
        </div>                   
      </div> 
    </div>
  </div>
</body>

<section class="hero teaser">
  <div class="container is-max-desktop">
      <div class="video">
        <div id="teaser-loader" class="video-loader">
            <div class="loader-content">
              <span class="icon">
                <i class="fas fa-spinner fa-pulse"></i>
              </span>
              <span>Loading...</span>
            </div>
          </div>
        <div class="hero-body" style="margin-top: 1rem;">
          <video poseter="" id="teaser" autoplay muted loop playsinline height="100%" style="border-radius: 16px; overflow: hidden;">
            <source src="./static/videos/main_teaser.mp4" type="video/mp4">
          </video>
        </div>
      </div>
  </div>
</section>

<section class="section">
  <div class="container is-max-desktop">
    <!-- Abstract. -->
    <div class="columns is-centered has-text-centered">
      <div class="column is-four-fifths" style="margin-top: -2rem;">
        <h2 class="title is-3">Abstract</h2>
        <div class="content has-text-justified">
          <p>
            We propose Multi-view Pyramid Transformer (<b>MVP</b>), 
            a scalable multi-view transformer architecture 
            that directly reconstructs large 3D scenes from 
            tens to hundreds of images in a single forward pass. 
            Drawing on the idea of ``looking broader to see the whole, looking finer to see the details," 
            MVP is built on two core design principles: 
            1) a local-to-global inter-view hierarchy that gradually broadens the model's perspective 
            from local views to groups and ultimately the full scene, and 
            2) a fine-to-coarse intra-view hierarchy that starts from detailed spatial representations 
            and progressively aggregates them into compact, information-dense tokens. 
            This dual hierarchy achieves both computational efficiency and representational richness, 
            enabling fast reconstruction of large and complex scenes. 
            We validate MVP on diverse datasets and show that, 
            when coupled with 3D Gaussian Splatting as the underlying 3D representation, 
            it achieves state-of-the-art generalizable reconstruction quality 
            while maintaining high efficiency and scalability across a wide range of view configurations.
          </p>
          <!-- <p>
            Toward a scalable and efficient feed-forward 3D reconstruction, 
            we introduce an iterative Large 3D Reconstruction Model (<b><i>iLRM</i></b>) 
            that generates 3D Gaussian representations through an iterative refinement mechanism, 
            guided by three core principles: 
            (1) decoupling the scene representation from input-view images to enable <b><i>compact 3D representations</i></b>; 
            (2) decomposing fully-attentional multi-view interactions into a <b><i>two-stage attention</i></b> scheme to reduce computational costs; 
            and (3) injecting <b><i>high-resolution information at every layer</i></b> to achieve high-fidelity reconstruction.
            Experimental results on widely used datasets, such as RE10K and DL3DV, demonstrate that <b><i>iLRM</i></b> outperforms existing methods in both reconstruction quality and speed.            
          </p> -->
        </div>
      </div>
    </div>
    <!--/ Abstract. -->
  </div>
</section>

<section class="hero teaser">
  <div class="container is-max-desktop">
    <div class="hero-body" style="margin-top: -1rem;">
      <img src="./static/images/teaser.jpg"/>
      <h2 class="subtitle has-text-centered">
        <span class="dnerf">MVP handles a wide range of input views, reconstructing diverse large-scale scenes within 0.1–2.0 seconds.</span>
      </h2>

    </div>
  </div>
</section>

<section class="hero is-light is-small">
  <div class="hero-body">
    <div class="container">
      <div id="results-carousel" class="carousel results-carousel" data-slides-to-show="2">
        <div class="item item-140">
          <video poster="" id="140" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/256_teaser/colors_.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-135">
          <video poster="" id="135" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/256_teaser/museum_.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-tree">
          <video poster="" id="tree" autoplay controls muted loop playsinline height="100%" preload="none">
            <source src="./static/videos/256_teaser/chairs_.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-redcar">
          <video poster="" id="redcar" autoplay controls muted loop playsinline height="100%" preload="none">
            <source src="./static/videos/256_teaser/pillars_.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-ff">
          <video poster="" id="ff" autoplay controls muted loop playsinline height="100%" preload="none">
            <source src="./static/videos/256_teaser/dino_.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-clothes">
          <video poster="" id="clothes" autoplay controls muted loop playsinline height="100%" preload="none">
            <source src="./static/videos/256_teaser/pond_trees_.mp4"
                    type="video/mp4">
          </video>
        </div>        
      </div>
      <div class="has-text-centered">
        <p class="subtitle is-5">Inference results on the DL3DV dataset using 256 input images with a resolution of 960×540.</p>
      </div>      
    </div>
  </div>
</section>

<section class="hero is-light is-small">
  <div class="hero-body">
    <div class="container">
      <div id="results-carousel" class="carousel results-carousel" data-slides-to-show="2">
        <div class="item item-140">
          <video poster="" id="140" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/32_teaser/140_.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-135">
          <video poster="" id="135" autoplay controls muted loop playsinline height="100%">
            <source src="./static/videos/32_teaser/135_.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-tree">
          <video poster="" id="tree" autoplay controls muted loop playsinline height="100%" preload="none">
            <source src="./static/videos/32_teaser/tree_.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-redcar">
          <video poster="" id="redcar" autoplay controls muted loop playsinline height="100%" preload="none">
            <source src="./static/videos/32_teaser/redcar_.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-ff">
          <video poster="" id="ff" autoplay controls muted loop playsinline height="100%" preload="none">
            <source src="./static/videos/32_teaser/ff_.mp4"
                    type="video/mp4">
          </video>
        </div>
        <div class="item item-clothes">
          <video poster="" id="clothes" autoplay controls muted loop playsinline height="100%" preload="none">
            <source src="./static/videos/32_teaser/clothes_.mp4"
                    type="video/mp4">
          </video>
        </div>        
      </div>
      <div class="has-text-centered">
        <p class="subtitle is-5">Inference results on the DL3DV dataset using 32 input images with a resolution of 960×540.</p>
      </div>      
    </div>
  </div>
</section>


<section class="section">
  <div class="container is-max-desktop">

    <!-- Core architectural design. -->
    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-3">Core architectural design</h2>   
        <div class="box m-5">
        <div class="content has-text-centered">
          <img src="static/images/main_arch.png" width="100%" alt="model" /> 
        </div>
        </div>
        <div class="content has-text-justified">
          <p>
            Given tokenized inputs, our model applies a three stage hierarchy of alternating attention blocks, 
            varying in both self-attention coverage and token resolution. 
            A Pyramidal Feature Aggregation module fuses the outputs from all stages, which are then passed to a final head for dense prediction.
          </p>
        </div>             
      </div>
    </div>

    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-3">Quantitative Comparison</h2>   
        <div class="content has-text-justified">
          <p>
            We compare <span style="color:#BF571B;">M</span><span style="color:#638C45;">V</span><span style="color:#3573B1;">P</span> against recent feed-forward 3D reconstruction methods, <span style="color:#3f5bc1;"><b>Long-LRM</b></span>, and <span style="color:#d4782d;"><b>iLRM</b></span>.
            We evaluate the methods on in-domain dataset, <b>DL3DV</b>, and out-of-domain datasets, <b>Tanks&Temples</b> and <b>Mip-NeRF360</b>. The resolution of input images is <b>960x540</b> for all methods.
          </p>       

          <div class="box m-5">
            <div class="content has-text-centered">
              <img src="static/images/dl3dv.png" width="120%" alt="dl3dv" />
            </div>
          </div>

          <!-- 2) Two figures side by side, inside a box of the same size -->
          <div class="box m-5">
            <div class="columns">
              <div class="column">
                <div class="content has-text-centered">
                  <img src="static/images/tnt.png" width="120%" alt="tnt" />
                </div>
              </div>

              <div class="column">
                <div class="content has-text-centered">
                  <img src="static/images/mip.png" width="120%" alt="mip" />
                </div>
              </div>
            </div>
          </div>

          <p>
            We additionally compare <span style="color:#BF571B;">M</span><span style="color:#638C45;">V</span><span style="color:#3573B1;">P</span> on RealEstate10K dataset against <span style="color:#3f5bc1;"><b>CLiFT</b></span>, and <span style="color:#d4782d;"><b>iLRM</b></span>.
            All methods were trained exclusively on RealEstate10K, and the resolution of input images is <b>256x256</b>.
          </p>   

          <div class="box m-5">
            <div class="content has-text-centered">
              <img src="static/images/re10k.png" alt="re10k" style="max-height: 200px; width: auto;" />
            </div>
          </div>

        </div>             
      </div>
    </div>

    <div class="columns is-centered">
      <div class="column is-full-width">
        <h2 class="title is-3" style="margin-top: 1.0rem">Qualitative Comparison</h2>
        <div class="content has-text-justified">
          <p>
            <b>Use mouse to slide the handle left/right to compare the two methods.</b> <b>It might take a few seconds to load the videos.</b><br>            
            <b>Please use the buttons on below each comparison videos to toggle between different baseline models.</b>            
          </p>
        </div>

        <!-- <h2 class="title is-4" style="margin-top: 1.0rem">
          128-view (<span style="color:#A8D18D;">0.77s</span> vs. <span style="color:#E25353;">6.39s</span>)
        </h2>  -->

        <!-- <div class="content has-text-centered">
          <h2 class="title is-5" style="margin-bottom: -0.5rem;">128-view reconstruction</h2> 
          <div class="video-slider-container">
            <div class="video-slider-wrapper js-video-slider">
              <video class="video-left" autoplay muted loop playsinline>
                <source src="static/videos/128_comp/128mvp.mp4" type="video/mp4">
              </video>
              <video class="video-right" autoplay muted loop playsinline>
                <source src="static/videos/128_comp/128llrm.mp4" type="video/mp4">
              </video>

              <div class="slider-bar"></div>
              <div class="slider-handle"></div>

              <div class="video-label video-label-left"><span style="color:#A8D18D;">MVP (Ours)</span></div>
              <div class="video-label video-label-right"><span style="color:#3f5bc1;">Long-LRM</span></div>

              <button class="video-toggle-button">
                <img class="toggle-icon" src="static/images/pause.png" alt="Pause" />
              </button>
            </div>
          </div>     
        </div>           -->

        <div class="content has-text-centered">
          <div class="video-header-row">
            <h2 class="title is-5" style="margin-bottom: -0.5rem;">32-view reconstruction</h2>
            <!-- NEW: right-video switch button (outside video, upper right) -->
          </div>

          <div class="video-slider-container" data-view="32">
            <div class="video-slider-wrapper js-video-slider">
              <video preload="metadata" class="video-left" autoplay muted loop playsinline disablepictureinpicture disableremoteplayback>
                <source src="static/videos/32_comp/32mvp_.mp4" type="video/mp4">
              </video>
              <video preload="metadata" class="video-right" autoplay muted loop playsinline disablepictureinpicture disableremoteplayback>
                <source src="static/videos/32_comp/32llrm_.mp4" type="video/mp4">
              </video>

              <!-- slider bar + handle -->
              <div class="slider-bar"></div>
              <div class="slider-handle"></div>

              <div class="video-label video-label-left">
                <span style="color:#A8D18D;">MVP (0.17s)</span>
              </div>
              <div class="video-label video-label-right">
                <span style="color:#3f5bc1;">Long-LRM (0.84s)</span>
              </div>

              <!-- play/pause stays inside the video overlay -->
              <button class="video-toggle-button">
                <img class="toggle-icon" src="static/images/pause.png" alt="Pause" />
              </button>
            </div>
          </div>
          <div style="text-align: center; margin-top: -1.5rem;">
            <button class="video-change-button" style="color:#fdfffb;">
              Click to compare with iLRM!
            </button>
          </div>
        </div>

        <div class="content has-text-centered">
          <div class="video-header-row">
            <h2 class="title is-5" style="margin-bottom: -0.5rem;">128-view reconstruction</h2>
          </div>

          <div class="video-slider-container" data-view="128">
            <div class="video-slider-wrapper js-video-slider">
              <video preload="metadata" class="video-left" autoplay muted loop playsinline disablepictureinpicture disableremoteplayback>
                <source src="static/videos/128_comp/128mvp_.mp4" type="video/mp4">
              </video>
              <video preload="metadata" class="video-right" autoplay muted loop playsinline disablepictureinpicture disableremoteplayback>
                <source src="static/videos/128_comp/128llrm_.mp4" type="video/mp4">
              </video>

              <div class="slider-bar"></div>
              <div class="slider-handle"></div>

              <div class="video-label video-label-left">
                <span style="color:#A8D18D;">MVP (0.77s)</span>
              </div>
              <div class="video-label video-label-right">
                <span style="color:#3f5bc1;">Long-LRM (6.39s)</span>
              </div>

              <button class="video-toggle-button">
                <img class="toggle-icon" src="static/images/pause.png" alt="Pause" />
              </button>
            </div>
          </div>
          <div style="text-align: center; margin-top: -1.5rem;">
            <button class="video-change-button" style="color:#fdfffb;">
              Click to compare with iLRM!
            </button>
          </div>
        </div>     

        
          <div class="content has-text-centered">
            <div class="video-header-row">
              <h2 class="title is-5" style="margin-bottom: -0.5rem;">4-view error map results on RealEstate10K</h2>
            </div>

            <div class="video-slider-container" style="max-width: 400px; margin: 2rem auto; height: auto">
              <div class="video-slider-wrapper" id="image-slider-wrapper">
                
                <img src="static/images/ours.png" class="img-left" alt="MVP">
                <img src="static/images/clift.png" class="img-right" id="img-right-element" alt="Comparison">

                <div class="slider-bar"></div>
                <div class="slider-handle"></div>

                <div class="video-label video-label-left">
                  <span style="color:#A8D18D;">MVP (Ours)</span>
                </div>
                <div class="video-label video-label-right" id="img-right-label">
                  <span style="color:#3f5bc1;">CLiFT</span>
                </div>
              </div>
            </div>
            <div style="text-align: center; margin-top: -1.5rem;">
              <button class="video-change-button" id="img-toggle-btn" style="color:#fdfffb; margin-bottom: -2rem; margin-right: 2rem;">
                Click to compare with <span style="color:#FCA55EFF;">iLRM</span>
              </button>
            </div>
          </div>
        </div>

        <style>
            /* Ensure images overlap perfectly like videos */
            #image-slider-wrapper {
              position: relative;
              overflow: hidden;
              padding-bottom: 100%; 
              height: 0;
            }

            #image-slider-wrapper img {
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              object-fit: cover;
              user-select: none;
            }

            #image-slider-wrapper .img-left {
              z-index: 1;
            }

            #image-slider-wrapper .img-right {
              z-index: 2;
              clip-path: inset(0 0 0 50%);
            }
            
            #image-slider-wrapper .slider-bar,
            #image-slider-wrapper .slider-handle,
            #image-slider-wrapper .video-label {
              z-index: 10;
            }
        </style>

        
      </div>
    </div>
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-full-width">
          <h2 class="title is-3">Inference Time Comparison</h2>   
          <div class="content has-text-justified">
            <p>
              We compare the inference time as a function of the number of input views. We measure all timings at an input resolution of 960x540 on a H100 GPU.
              Note that the inference time only accounts for the generation of 3D Gaussians. For novel view rendering, Long-LRM encounters a memory error when using
              more than 192 input views.
            </p>
          </div>         
          <div class="container is-max-desktop">
            <div class="hero-body" style="margin-top: -3rem;">
              <img src="./static/images/inf_time_graph.png"/>
            </div>
          </div>         
        </div>
      </div>
    </div>
  </div>
</section>

  

<section class="section" id="BibTeX">
  <div class="container is-max-desktop content" style="margin-top: -2rem;">
    <h2 class="title">BibTeX</h2>
      <pre><code style="font-size: 1.25em;">
        @misc{kang2025multiviewpyramidtransformerlook,
              title={Multi-view Pyramid Transformer: Look Coarser to See Broader}, 
              author={Gyeongjin Kang and Seungkwon Yang and Seungtae Nam and Younggeun Lee and Jungwoo Kim and Eunbyung Park},
              year={2025},
              eprint={2512.07806},
              archivePrefix={arXiv},
              primaryClass={cs.CV},
              url={https://arxiv.org/abs/2512.07806}, 
        }</code></pre>
  </div>
</section>
<footer class="footer">
  <div class="container">
    <div class="content has-text-centered">
      <a class="icon-link"
         href="https://arxiv.org/pdf/2512.07806">
        <i class="fas fa-file-pdf"></i>
      </a>
      <a class="icon-link" href="https://github.com/Gynjn" class="external-link" disabled>
        <i class="fab fa-github"></i>
      </a>
    </div>
    <div class="columns is-centered">
      <div class="column is-8">
        <div class="content">
          <p>
            Commons Attribution-ShareAlike 4.0 International License</a>.
            This page was built using the <a href="https://github.com/eliahuhorwitz/Academic-project-page-template" target="_blank">Academic Project Page Template</a> 
            which was adopted from the <a href="https://nerfies.github.io" target="_blank">Nerfies</a> project page.
          </p>
        </div>
      </div>
    </div>
  </div>
</footer>

<script>
window.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".video-slider-container").forEach((container) => {
    // 1. Setup Elements
    const wrapper = container.querySelector(".js-video-slider");
    if (!wrapper) return;

    const videoLeft = wrapper.querySelector(".video-left");
    const rightContainer = wrapper.querySelector(".video-right");
    
    // UI Elements
    const sliderBar    = wrapper.querySelector(".slider-bar");
    const sliderHandle = wrapper.querySelector(".slider-handle");
    const toggleBtn    = wrapper.querySelector(".video-toggle-button");
    const icon         = wrapper.querySelector(".toggle-icon");
    const changeBtn    = container.parentElement.querySelector(".video-change-button");
    const rightLabel   = wrapper.querySelector(".video-label-right span");
    const baseView     = container.dataset.view || "32";

    // Setup Canvas
    let canvas = wrapper.querySelector("canvas");
    if (!canvas) {
        canvas = document.createElement("canvas");
        canvas.style.width = "100%";
        canvas.style.height = "100%";
        canvas.style.display = "block";
        wrapper.appendChild(canvas);
        
        videoLeft.style.display = "none";
        rightContainer.style.display = "none"; 
        
        if(sliderBar) sliderBar.style.zIndex = "10";
        if(sliderHandle) sliderHandle.style.zIndex = "11";
    }
    const context = canvas.getContext("2d");

    // DATA CONFIG
    const rightVideoConfig = [
        { key: "llrm", toggle_label: "iLRM", label32: "Long-LRM", label128: "Long-LRM", color: "#7E98F7FF", change_color: "#FCA55EFF" },
        { key: "ilrm", toggle_label: "Long-LRM", label32: "iLRM", label128: "iLRM", color: "#FCA55EFF", change_color: "#7E98F7FF" },
    ];

    // 2. PARALLEL VIDEO LOADING
    const loadedRightVideos = rightVideoConfig.map((config) => {
        const v = document.createElement("video");
        v.muted = true;
        v.loop = true;
        v.playsInline = true;
        v.preload = "auto";
        v.src = `static/videos/${baseView}_comp/${baseView}${config.key}_.mp4`;
        v.style.display = "none"; 
        rightContainer.appendChild(v);
        return v;
    });

    // State
    let currentRightIndex = 0;
    
    // "Latch" variable: Stores the video currently being drawn.
    // We only update this when the new target is truly ready.
    let activeRenderVideo = loadedRightVideos[0]; 

    let position = 0.5;
    let isPlaying = true; 
    let animationId = null;

    /* =======================================================
       3) Smart Canvas Drawing Loop (The Fix)
       ======================================================= */
    
    function resizeCanvas() {
        if (videoLeft.videoWidth > 0 && canvas.width !== videoLeft.videoWidth) {
            canvas.width = videoLeft.videoWidth;
            canvas.height = videoLeft.videoHeight;
        }
    }

    function drawLoop() {
        if (!videoLeft) return;

        resizeCanvas();
        const w = canvas.width;
        const h = canvas.height;

        // 1. Draw Left Video
        context.drawImage(videoLeft, 0, 0, w, h);

        // 2. Determine Right Video Source
        const targetVideo = loadedRightVideos[currentRightIndex];

        // LATCH LOGIC:
        // We only switch the visual source if the target video is NOT seeking
        // and has enough data to render a frame.
        // If it's still loading the seek, we keep drawing the old video ('activeRenderVideo')
        // to prevent black flashes or jitter.
        const isReady = targetVideo.readyState >= 2 && !targetVideo.seeking;
        
        if (isReady) {
            activeRenderVideo = targetVideo;
        }

        // 3. Draw the Right Video
        const splitX = w * position;
        const drawW = w - splitX;

        // Ensure we actually have something to draw
        if (activeRenderVideo.readyState >= 2) {
            context.drawImage(activeRenderVideo, splitX, 0, drawW, h, splitX, 0, drawW, h);
        }

        // Update UI
        const pct = position * 100 + "%";
        if (sliderBar) sliderBar.style.left = pct;
        if (sliderHandle) sliderHandle.style.left = pct;

        animationId = requestAnimationFrame(drawLoop);
    }

    /* =======================================================
       4) Interaction
       ======================================================= */
    function updatePos(clientX) {
        const rect = canvas.getBoundingClientRect();
        position = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
    }
    wrapper.addEventListener("mousemove", (e) => updatePos(e.clientX));
    wrapper.addEventListener("touchstart", (e) => updatePos(e.touches[0].clientX));
    wrapper.addEventListener("touchmove", (e) => {
        updatePos(e.touches[0].clientX);
        e.preventDefault();
    });
    animationId = requestAnimationFrame(drawLoop);

    /* =======================================================
       5) Multi-Video Sync Logic
       ======================================================= */
    let syncing = false;

    function softSyncLoop() {
        if (!syncing || videoLeft.paused) return;
        
        const masterTime = videoLeft.currentTime;

        // Keep all hidden videos warm and synced
        loadedRightVideos.forEach(v => {
            const d = masterTime - v.currentTime;
            if (Math.abs(d) > 0.05) { 
                v.currentTime = masterTime;
            }
        });

        videoLeft.requestVideoFrameCallback(softSyncLoop);
    }

    function startSync() {
        if (syncing) return;
        syncing = true;
        videoLeft.requestVideoFrameCallback(softSyncLoop);
    }
    function stopSync() { syncing = false; }

    /* =======================================================
       6) Controls (Play/Pause)
       ======================================================= */

    function setAllPlayState(play) {
        if (play) {
            videoLeft.play();
            loadedRightVideos.forEach(v => v.play().catch(()=>{}));
            startSync();
            icon.src = "static/images/pause.png";
            icon.alt = "Pause";
        } else {
            videoLeft.pause();
            // Force precise sync on pause
            const finalTime = videoLeft.currentTime;
            loadedRightVideos.forEach(v => {
                v.pause();
                v.currentTime = finalTime;
            });
            stopSync();
            icon.src = "static/images/play.png";
            icon.alt = "Play";
        }
    }

    toggleBtn.addEventListener("click", () => {
        isPlaying = !isPlaying;
        setAllPlayState(isPlaying);
    });

    /* =======================================================
       7) INSTANT SWITCH LOGIC (Simplified)
       ======================================================= */
    if (changeBtn) {
        updateLabels(0);

        changeBtn.addEventListener("click", () => {
            // 1. Change Logic Immediately
            currentRightIndex = (currentRightIndex + 1) % loadedRightVideos.length;
            
            // 2. Sync Time Immediately
            // (Even if paused, this sets the 'seeking' flag to true internally)
            loadedRightVideos[currentRightIndex].currentTime = videoLeft.currentTime;
            
            // 3. Update Text Immediately
            updateLabels(currentRightIndex);
            
            // Note: We don't wait for the video to be ready. 
            // The drawLoop handles that by showing the OLD video 
            // until the NEW one reports !seeking.
        });
    }

    function updateLabels(idx) {
        const info = rightVideoConfig[idx];
        if (rightLabel) {
            rightLabel.textContent = baseView === "128" ? info.label128 : info.label32;
            rightLabel.style.color = info.color;
        }
        if (changeBtn) {
            changeBtn.innerHTML = `Click to compare with <span style="color: ${info.change_color}">${info.toggle_label}</span>`;
        }
    }

    /* =======================================================
       8) Initialization
       ======================================================= */
    videoLeft.muted = true;
    const p = videoLeft.play();
    if (p !== undefined) {
        p.then(() => {
            setAllPlayState(true);
        }).catch(() => {
            isPlaying = false;
            setAllPlayState(false);
        });
    }
  });
});
</script>

<!-- <script>
  window.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".js-video-slider").forEach((wrapper) => {
      const sliderBar    = wrapper.querySelector(".slider-bar");
      const sliderHandle = wrapper.querySelector(".slider-handle");
      const videoLeft    = wrapper.querySelector(".video-left");
      const videoRight   = wrapper.querySelector(".video-right");
      const toggleBtn    = wrapper.querySelector(".video-toggle-button");
      const icon         = wrapper.querySelector(".toggle-icon");

      const setCenter = () => {
        videoRight.style.clipPath = "inset(0 0 0 50%)";
        sliderBar.style.left      = "50%";
        sliderHandle.style.left   = "50%";
      };
      setCenter();

      wrapper.addEventListener("mousemove", (e) => {
        const bounds  = wrapper.getBoundingClientRect();
        const offsetX = e.clientX - bounds.left;
        const percent = offsetX / bounds.width;
        const clipPercent = Math.min(100, Math.max(0, percent * 100));

        videoRight.style.clipPath = `inset(0 0 0 ${clipPercent}%)`;
        sliderBar.style.left      = `${clipPercent}%`;
        sliderHandle.style.left   = `${clipPercent}%`;
      });

      wrapper.addEventListener("mouseleave", () => {
        setCenter();
      });

      let isPlaying = true;
      toggleBtn.addEventListener("click", () => {
        if (isPlaying) {
          videoLeft.pause();
          videoRight.pause();
          icon.src = "static/images/play.png";
          icon.alt = "Play";
        } else {
          videoLeft.play();
          videoRight.play();
          icon.src = "static/images/pause.png";
          icon.alt = "Pause";
        }
        isPlaying = !isPlaying;
      });   
    });
  });
</script> -->

<script>
  window.addEventListener("DOMContentLoaded", () => {
    const video = document.getElementById("teaser");
    const wrapper = document.querySelector(".header-video");

    if (!video || !wrapper) return;

    // Make sure it shows the first frame only
    // video.addEventListener("loadeddata", () => {
    //   video.currentTime = 0.1;
    //   video.pause();
    // });

    wrapper.addEventListener("mouseenter", () => {
      video.play();
    });

    wrapper.addEventListener("mouseleave", () => {
      video.pause();
      video.currentTime = 0.1; // back to first frame
    });
  });
</script>

<script>
  window.addEventListener("DOMContentLoaded", () => {
    const wrapper = document.getElementById("image-slider-wrapper");
    const imgRight = document.getElementById("img-right-element");
    const sliderBar = wrapper.querySelector(".slider-bar");
    const sliderHandle = wrapper.querySelector(".slider-handle");
    const changeBtn = document.getElementById("img-toggle-btn");
    const rightLabel = document.getElementById("img-right-label").querySelector("span");

    // --- 1. Slider Logic ---
    const setCenter = () => {
      imgRight.style.clipPath = "inset(0 0 0 50%)";
      sliderBar.style.left = "50%";
      sliderHandle.style.left = "50%";
    };
    setCenter();

    wrapper.addEventListener("mousemove", (e) => {
      const bounds = wrapper.getBoundingClientRect();
      const offsetX = e.clientX - bounds.left;
      const percent = offsetX / bounds.width;
      const clipPercent = Math.min(100, Math.max(0, percent * 100));

      // Clip the Left side of the Right Image to reveal the Left Image underneath
      imgRight.style.clipPath = `inset(0 0 0 ${clipPercent}%)`;
      sliderBar.style.left = `${clipPercent}%`;
      sliderHandle.style.left = `${clipPercent}%`;
    });

    // Optional: Reset on mouse leave
    wrapper.addEventListener("mouseleave", () => {
      // setCenter(); // Uncomment if you want it to snap back to center
    });

    // --- 2. Switch Logic (CLiFT <-> iLRM) ---
    // Configuration for the right image
    const methods = [
      {
        name: "CLiFT",
        changewith: "iLRM",
        src: "static/images/clift.png",
        color: "#7E98F7FF", // Blue-ish
        change_color: "#FCA55EFF"
      },
      {
        name: "iLRM",
        changewith: "CLiFT",
        src: "static/images/ilrm.png",
        color: "#FCA55EFF", // Orange-ish
        change_color: "#7E98F7FF"
      }
    ];

    let currentIndex = 0; // Start with CLiFT

    changeBtn.addEventListener("click", () => {
      // Toggle index
      currentIndex = (currentIndex + 1) % methods.length;
      const nextMethod = methods[currentIndex];

      // Update Image Source
      imgRight.src = nextMethod.src;
      
      // Update Label
      rightLabel.textContent = nextMethod.name;
      rightLabel.style.color = nextMethod.color;

      // Update Button Text
      changeBtn.innerHTML = `Click to compare with <span style="color: ${nextMethod.change_color}">${nextMethod.changewith}</span>`;
    });
  });
</script>

</section>

</body>
</html>
